<div layout="row" layout-align="center">

		<md-card flex="100" flex-gt-sm="60">
			<md-data-table-toolbar class="toolbar-with-fab"  layout="row" layout-margin>
			    <span class="md-subhead" flex="70" flex-gt-sm="80"><md-icon>show_chart</md-icon> &nbsp  Metrics Manager</span>
			    <span flex-gt-sm></span>
			    <md-button class="md-primary" ui-sref="metricmanagement.view"  flex="25" flex-gt-sm="20">
			      <md-icon >list</md-icon> <span hide show-gt-sm> View Metrics</span>
			    </md-button>
			</md-data-table-toolbar>
			<form name="metricForm">
	        <md-card-content layout="column" >
	        	<input type="hidden" ng-model="metrics.data.id" />
	            <md-input-container flex>
					<label>Name</label> <input required  name="name" ng-model="metrics.data.name" ng-disabled="isOnEdit">
					<div ng-messages="metricForm.name.$error">
			            <div ng-message="required">Please enter key.</div>
	                </div>
				</md-input-container>
				<md-chips ng-model="metrics.data.types" md-max-chips="1" md-on-add="metrics.keyfield.onAddChip($chip, metrics.data.types)">
		    		<md-autocomplete
		    			ng-hide="metrics.data.types.length > 0"
						md-autofocus="false"
						md-min-length="0"
			            md-search-text="metrics.typefield.searchText"
			            md-items="item in metrics.typefield.search(metrics.typefield.searchText)"
			            placeholder="Please choose type.." flex>
			          <md-item-template>
			            <span >{{item.name}}</span>
			          </md-item-template>
		        	</md-autocomplete>
		         	<md-chip-template>
					        <span >
					          <strong>{{$chip.name}}</strong>
					        </span>
			      	</md-chip-template>
		    	</md-chips>
				<md-chips ng-model="metrics.data.keys" md-max-chips="1" md-on-add="metrics.keyfield.onAddChip($chip, metrics.data.types)">
					<md-autocomplete  
						ng-hide="metrics.data.keys.length > 0"
						md-autofocus="false"
						md-require-match="true"
						md-min-length="0"
			            md-search-text="metrics.keyfield.searchText"
			            md-items="item in metrics.keyfield.search(metrics.keyfield.searchText)"
			            placeholder="Please choose key.." flex>
			          <md-item-template>
			            <span >{{item.key}}</span>
			          </md-item-template>
		       	 	</md-autocomplete>
	       	 		<md-chip-template>
					        <span >
					          <strong>{{$chip.key}}</strong>
					          <em>({{metrics.keyfield.getValueStr($chip)}})</em>
					        </span>
			      	</md-chip-template>
				</md-chips>
		        <span class="j-color-red" ng-show="!metrics.keyfield.isValid"> Non-numeric values with Key Sum is not allowed.</span>
	        </md-card-content>
	        <div layout layout-align="center" style="padding-bottom:25px">
	        	 <md-button aria-label="Save" ng-click="metrics.save(metricForm)" ng-disabled="showLoading || !metricForm.name.$valid || !metrics.keyfield.isValid" class="md-raised md-primary" flex="20" flex-gt-sm="10">
			          <md-icon md-svg-icon="resources/img/icons/save.svg" ></md-icon> Submit
			     </md-button>
	        </div>
	        </form>
		</md-card>
	
</div>


